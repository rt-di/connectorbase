showFooter : function() {
	return false;
},
init : function() {
	var that = this;
	var oModel = new JSONModel();
	oModel.attachRequestFailed(function(oEvent) {
			that.displayError(JSON.parse(oEvent.getParameter("responseText")));
	});
	oStateModel.setProperty("/title", "Landscape");
	oStateModel.setProperty("/breadcrumbs", [ {"text" : "Homepage", "link" : "./Home"} ] );

	oModel.loadData("../rest/landscape");
	this.getView().setModel(oModel);
	oModel.attachRequestCompleted(function() {
		var container = that.getView().byId('visualization');
		var data = oModel.getData();
		
		var chart = am4core.create(container.getDomRef(), am4plugins_forceDirected.ForceDirectedTree); 
		var series = chart.series.push(new am4plugins_forceDirected.ForceDirectedSeries());
		
		var svg_producer = 'm3.000002,7.857143l0,46.285717q0,1.6875 1.166292,2.77232t2.762281,1.08482l47.142853,0q1.71875,0 2.823665,-1.08482t1.104908,-2.77232l0,-46.285717q0,-1.6875 -1.104908,-2.772326t-2.823665,-1.08482l-47.142853,0q-1.595982,0 -2.762281,1.08482t-1.166292,2.772326zm20.625,46.285717l0,-12.897327l13.75,0l0,12.897327l-13.75,0zm0,-33.750001l0,-12.535716l13.75,0l0,12.535716l-13.75,0zm30.446427,20.852674l0,12.897327l-12.767853,0l0,-12.897327l12.767853,0zm-47.142853,0l12.767853,0l0,12.897327l-12.767853,0l0,-12.897327zm34.375,-33.38839l12.767853,0l0,12.535716l-12.767853,0l0,-12.535716zm-21.607147,0l0,12.535716l-12.767853,0l0,-12.535716l12.767853,0';
		var svg_consumer = 'm0,46.625001q0,-6.070313 2.276786,-11.5625t6.147322,-9.75586t9.258929,-7.082031t11.459822,-3.685547l0,-4.914063l-9.714286,0l0,-4.625l29.142858,0l0,4.625l-9.714286,0l0,4.914063q8.044643,1.011719 14.267857,5.203125l5.160714,-4.914063l6.982143,6.648438l-4.857143,4.625q3.491071,4.191406 5.540179,9.322266t2.049107,11.201172q0,6.648438 -2.65625,12.574219t-7.285714,10.333985t-10.776786,6.9375t-13.28125,2.529297q-6.982143,0 -13.205357,-2.529297t-10.852679,-6.9375t-7.285714,-10.333985t-2.65625,-12.574219zm34,27.75q6.071429,0 11.383929,-2.167969t9.258929,-5.998047t6.223214,-8.888672t2.276786,-10.695313q0,-5.78125 -2.276786,-10.839844t-6.223214,-8.816407t-9.258929,-5.925781t-11.383929,-2.167969t-11.383929,2.167969t-9.258929,5.925781t-6.223214,8.816407t-2.276786,10.839844q0,5.636719 2.276786,10.695313t6.223214,8.888672t9.258929,5.998047t11.383929,2.167969zm-2.580357,-39.312501q0,-2.3125 2.428571,-2.3125t2.428571,2.3125l0,11.5625l14.723214,0q2.428571,0 2.428571,2.3125q0,0.867187 -0.683036,1.589844t-1.745536,0.722656l-17.151786,0q-1.0625,0 -1.745536,-0.722656t-0.683036,-1.589844l0,-13.875001z'; 
		var svg_service = 'm4,72.437493l0,-59.312495q0,-1.853515 1.466518,-3.208007t3.747768,-1.354492l10.428571,0l0,-4.5625l5.214286,0l0,4.5625l31.285714,0l0,-4.5625l5.214286,0l0,4.5625l10.428571,0q2.28125,0 3.747768,1.354492t1.466518,3.208007l0,59.312495q0,1.996094 -1.466518,3.279297t-3.747768,1.283203l-62.571428,0q-2.28125,0 -3.747768,-1.283203t-1.466518,-3.279297zm5.214286,0l62.571428,0l0,-50.187495l-62.571428,0l0,50.187495zm10.265625,-25.093748q0,-2.28125 2.607143,-2.28125l31.122768,0l-12.220982,-9.695312q-1.792411,-1.710937 0,-3.279297q0.814732,-0.712891 1.792411,-0.712891t1.792411,0.712891l14.991071,11.833984q1.466518,1.425781 1.466518,3.279297t-1.466518,3.279297l-14.991071,12.261718q-0.814732,0.712891 -1.792411,0.712891q-0.488839,0 -1.792411,-0.712891q-1.792411,-1.710937 0,-3.279297l12.220982,-9.83789l-31.122768,0q-2.607143,0 -2.607143,-2.28125zm36.662946,-34.218747l0,4.5625l5.214286,0l0,-4.5625l-5.214286,0zm-36.499999,0l0,4.5625l5.214286,0l0,-4.5625l-5.214286,0z';
		// var svg_topic = 'm5.063221,21.830702l1.292466,0l-1.436074,-7.599596q0,-0.407121 0.287215,-0.814242t0.718037,-0.407121l12.063019,-2.035606l-0.287215,-2.849848q-0.143607,-0.407121 0.215411,-0.746389t0.789841,-0.474975l30.444762,-2.578434q0.430822,-0.135707 0.789841,0.20356t0.502626,0.746389l0.143607,2.171313l15.940418,1.764192q1.148859,0.271414 1.148859,1.221363l-1.005252,14.249242l-2.72854,0l0.574429,-12.892172l-13.499093,-1.357071l1.866896,19.134697l-3.015755,0l-2.010503,-21.441717l-26.998185,2.442727l1.866896,18.99899l-2.872147,0l-1.579681,-15.470606l-9.908908,1.628485l3.877399,20.220354l-1.292466,5.156869q-0.143607,-0.678535 -0.718037,-2.917702t-1.220663,-4.681894t-1.148859,-4.41048t-0.646233,-2.103459q0.718037,6.242525 1.292466,11.806515q0.287215,2.30702 0.574429,4.681894t0.502626,4.478333t0.430822,3.799798t0.359019,2.646288l5.313473,-21.441717q0,-0.814242 1.005252,-0.814242l39.061204,0q0.574429,-1.899899 1.077056,-3.121262t2.082307,-1.221363l13.786307,0q2.154111,0 2.297718,1.628485q0,0.542828 -0.143607,0.678535l-7.898405,31.891162l-58.735414,0l-4.308221,-38.947929q-0.143607,-1.221363 1.148859,-1.221363l-0.000001,-0.000001zm8.472835,36.369495l50.406187,0l5.45708,-22.25596l-50.549794,0l-5.313473,22.25596zm12.781056,-39.897879q0,-5.021161 7.036761,-6.378232l-0.143607,-1.492778l2.72854,-0.271414l0.143607,1.357071q3.159362,0 5.241669,1.357071t2.513129,3.528384l-4.595436,0.814242q-0.430822,-0.814242 -1.148859,-1.424924t-1.579681,-0.746389l0.574429,5.971111q2.872147,0.271414 4.523632,0.949949t2.513129,1.492778t1.220663,1.764192t0.502626,1.764192q0,0.678535 -0.071804,1.289217t-0.215411,1.289217l-4.882651,0q0.718037,-1.085657 0.430822,-1.764192t-0.933448,-1.492778t-2.800344,-1.085657l0.430822,4.342626l-2.872147,0l-0.574429,-4.749747q-3.015755,-0.407121 -5.528884,-1.696339t-2.513129,-4.817601zm5.026258,-0.135707q0.143607,0.678535 0.718037,1.289217t2.154111,1.15351l-0.574429,-5.428283q-0.718037,0.271414 -1.579681,0.882096t-0.718037,2.103459zm0.143607,10.17803l0.861644,1.221363l-5.744295,0q0,-0.407121 -0.143607,-0.542828l5.026258,-0.678535z';
		
		var svg_pipeline = 'M13.8 41.6L43.8 41.6Q44.7 41.6 44.6 40.6L35.4 3.8Q35.3 3.2 34.6 3.2L23.0 3.2Q22.3 3.2 22.3 3.8L13.1 40.6Q12.9 41.0 13.150 41.3Q13.4 41.6 13.8 41.6M3.2 44.8L8.0 44.8Q9.6 44.8 9.6 43.2Q9.6 42.6 9.150 42.1Q8.7 41.6 8.0 41.6L3.2 41.6L3.2 32.0L8.0 32.0Q9.6 32.0 9.6 30.4Q9.6 29.8 9.150 29.3Q8.7 28.8 8.0 28.8L3.2 28.8L3.2 22.4L8.0 22.4Q9.6 22.4 9.6 20.8Q9.6 20.2 9.150 19.7Q8.7 19.2 8.0 19.2L3.2 19.2L3.2 12.8L8.0 12.8Q9.6 12.8 9.6 11.2Q9.6 9.6 8.0 9.6L3.2 9.6L3.2 3.2L8.0 3.2Q9.6 3.2 9.6 1.6Q9.6 1.0 9.150 0.5Q8.7 0 8.0 0L3.2 0Q1.8 0 0.9 0.950Q0 1.9 0 3.2L0 41.6Q0 43.0 0.9 43.9Q1.8 44.8 3.2 44.8M18.5 32.0L39.1 32.0L40.7 38.4L16.9 38.4L18.5 32.0M20.9 22.4L36.7 22.4L38.3 28.8L19.3 28.8L20.9 22.4M21.7 19.2L23.3 12.8L34.3 12.8L35.9 19.2L21.7 19.2M24.1 9.6L24.9 6.4L32.7 6.4L33.5 9.6L24.1 9.6Z';		
		var svg_connection = 'M2.1 44.8L13.4 33.3L14.7 34.6Q15.8 35.9 17.3 36.5Q18.8 37.1 20.4 37.1Q23.9 37.1 26.4 34.6L30.9 29.8L30.9 29.7L33.5 27.1Q36.0 24.8 36.0 21.450Q36.0 18.1 33.5 15.8L32.3 14.6L44.8 2.0L43.0 0L30.3 12.6L30.5 12.8L28.6 11.0Q26.1 8.5 22.9 8.5Q19.7 8.5 17.3 11.0L10.1 18.0Q7.5 20.6 7.5 23.950Q7.5 27.3 10.1 29.8L11.3 31.1L0 42.6L2.1 44.8M10.7 24.0Q10.7 21.9 12.3 20.3L14.6 18.0L26.4 29.8L24.0 32.4Q22.5 33.9 20.4 33.9Q18.3 33.9 17.1 32.5L12.4 27.5Q10.7 26.1 10.7 24.0M17.0 15.8L19.5 13.3L19.6 13.3L19.7 13.2Q21.1 11.7 22.9 11.7Q24.7 11.7 26.3 13.3L31.3 18.1Q32.8 19.5 32.8 21.4Q32.8 23.4 31.4 24.8L28.6 27.5L17.0 15.8Z';
		
		for (var i in data.nodes) {
			var n = data.nodes[i];
			n.value = 1;
			if (n.type === 'PRODUCER') {
				n.icon = svg_producer;			
			} else if (n.type === 'CONSUMER') {
				n.icon = svg_consumer;			
			} else if (n.type === 'SERVICE') {
				n.icon = svg_service;			
			} else if (n.type === 'PIPELINESERVER') {
				n.icon = svg_pipeline; // \ue143
			} else if (n.type === 'REMOTECONNECTION') {
				n.icon = svg_connection; // \ue20b
			}
		}
		series.data = data.nodes;
		
		series.dataFields.value = "value";
		series.dataFields.name = "label";
		series.dataFields.id = "id";
		series.dataFields.linkWith = "links";
		
		series.nodes.template.label.text = "{label}";
		series.nodes.template.label.valign = "bottom";
		series.nodes.template.label.fill = am4core.color("#000");
		series.nodes.template.label.dy = 10;
		series.nodes.template.tooltipText = "{type}";
		series.nodes.template.circle.fill = am4core.color("#fff");
		series.fontSize = 10;
		series.minRadius = 40;
		series.maxRadius = 60;
		// series.links.template.distance = 2;
		
		var icon = series.nodes.template.createChild(am4core.Sprite);
		icon.propertyFields.path = "icon";
		icon.horizontalCenter = "middle";
		icon.verticalCenter = "middle";
	});
	
},
save : function(oEvent) {
},
cancel : function(oEvent) {
}
